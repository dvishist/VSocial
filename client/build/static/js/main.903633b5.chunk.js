(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{193:function(e,t,a){},218:function(e,t,a){},220:function(e,t,a){},221:function(e,t,a){},222:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},227:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){},309:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(65),s=a.n(c),i=a(13),o=a(9),l=a.n(o),u=a(15),j=a(310),d=(a(193),a.p+"static/media/icon.b3b70c15.png"),b=a(174),h=a(1);function p(e){return Object(h.jsxs)("span",{children:[Object(h.jsx)("a",{href:"/profile/?id=".concat(e.userId),children:Object(h.jsx)(b.a,{style:{marginTop:"2px"},size:"mini",src:e.userImg,avatar:!0})}),Object(h.jsx)("span",{style:{marginLeft:"9px",fontSize:"20px",fontWeight:"bold",verticalAlign:"middle"},children:e.username})]})}var f=a(11),O=a.n(f),x=a(20),m=Object(r.createContext)(null),g=a(14),v=a(135),w=a.n(v),k=a(326);a(218);O.a.defaults.baseURL="http://localhost:4000/api";var S="http://localhost:4000/api/users/",P={loading:!1,results:[],value:""},N=[];function y(e,t){switch(t.type){case"CLEAN_QUERY":return P;case"START_SEARCH":return Object(g.a)(Object(g.a)({},e),{},{loading:!0,value:t.query});case"FINISH_SEARCH":return Object(g.a)(Object(g.a)({},e),{},{loading:!1,results:t.results});case"UPDATE_SELECTION":return window.location="./profile?id="+t.id,Object(g.a)(Object(g.a)({},e),{},{value:t.selection});default:throw new Error}}function C(){var e=Object(x.f)();Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,O.a.get("/users/all",{headers:{Authorization:"Bearer ".concat(t)}});case 3:a=e.sent,N=a.data.map((function(e){return{id:e.id,title:e.username,image:S+e.id+"/profilePicture"}}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var t=n.a.useReducer(y,P),a=Object(i.a)(t,2),c=a[0],s=a[1],o=c.loading,j=c.results,d=c.value,b=n.a.useRef(),p=n.a.useCallback((function(e,t){clearTimeout(b.current),s({type:"START_SEARCH",query:t.value}),b.current=setTimeout((function(){if(0!==t.value.length){var e=new RegExp(w.a.escapeRegExp(t.value),"i");s({type:"FINISH_SEARCH",results:w.a.filter(N,(function(t){return e.test(t.title)}))})}else s({type:"CLEAN_QUERY"})}),300)}),[]);return n.a.useEffect((function(){return function(){clearTimeout(b.current)}}),[]),Object(h.jsx)(k.a,{loading:o,onResultSelect:function(t,a){return s({type:"UPDATE_SELECTION",selection:a.result.title,id:a.result.id,history:e})},onSearchChange:p,results:j,value:d})}function I(e){var t=Object(x.f)(),a=Object(r.useContext)(m),n=a.user,c=a.setUser;Object(r.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token"),n){e.next=18;break}if(!a){e.next=17;break}return e.prev=3,e.next=6,O.a.get("/users/self",{headers:{Authorization:"Bearer ".concat(a)}});case 6:r=e.sent,s=r.data,c(s),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),localStorage.removeItem("token"),t.push("/login");case 15:e.next=18;break;case 17:t.push("/login");case 18:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}})()()}),[t,c,n]);var s=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,O.a.post("/auth/logout",{},{headers:{Authorization:"Bearer ".concat(t)}});case 3:window.location="/login",localStorage.removeItem("token");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{className:"topbarLeft",children:Object(h.jsx)(C,{})}),Object(h.jsx)("div",{className:"topbarCenter",children:Object(h.jsx)("div",{className:"logo",children:Object(h.jsx)("button",{style:{background:"none",color:"inherit",border:"none",font:"inherit",cursor:"pointer",outline:"inherit"},onClick:function(){t.push("/")},children:Object(h.jsxs)("h1",{children:[" ",Object(h.jsx)("img",{alt:"V",src:d,height:"33",width:"33"}),"Social"]})})})}),Object(h.jsxs)("div",{className:"topbarRight",children:[Object(h.jsx)(p,{userId:n._id,userImg:e.userImg}),Object(h.jsx)(j.a,{basic:!0,color:"green",onClick:s,children:"Logout"})]})]})}O.a.defaults.baseURL="http://localhost:4000/api";a(220);function E(){return Object(h.jsx)("div",{className:"rightbar",children:Object(h.jsx)("h2",{children:"Notifications"})})}a(221);function A(e){return Object(h.jsxs)("div",{className:"follower",children:[Object(h.jsxs)("a",{href:"/profile?id=".concat(e.id),children:[Object(h.jsx)("img",{alt:"",src:e.img}),Object(h.jsx)("span",{children:e.name})]}),Object(h.jsx)("label",{style:{backgroundColor:"Follower"===e.type?"darkgreen":"limegreen"},children:e.type})]})}O.a.defaults.baseURL="http://localhost:4000/api";var L="http://localhost:4000/api/users";function F(e){var t=e.user,a=Object(r.useState)([]),n=Object(i.a)(a,2),c=n[0],s=n[1],o=Object(r.useState)([]),j=Object(i.a)(o,2),d=j[0],b=j[1],p=localStorage.getItem("token");return Object(r.useEffect)((function(){var e=t.following.map(function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/users/".concat(t),{headers:{Authorization:"Bearer ".concat(p)}});case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all(e).then((function(e){b(e)}));var a=t.followers.map(function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/users/".concat(t),{headers:{Authorization:"Bearer ".concat(p)}});case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all(a).then((function(e){s(e)}))}),[p,t]),Object(h.jsxs)("div",{className:"leftbar",children:[Object(h.jsx)("h2",{children:"My Connections"}),Object(h.jsxs)("div",{className:"leftbarItems",children:[Object(h.jsx)("h3",{children:"Followers"}),c.length>0&&c.map((function(e){return Object(h.jsx)(A,{img:L+"/".concat(e._id,"/profilePicture"),id:e._id,name:e.username,type:"Follower"},e._id+"follower")})),Object(h.jsx)("h3",{children:"Following"}),d.length>0&&d.map((function(e){return Object(h.jsx)(A,{img:L+"/".concat(e._id,"/profilePicture"),id:e._id,name:e.username,type:"Following"},e._id+"following")}))]})]})}var _=a(173),U=(a(222),a(330)),B=a(323),z=a(71),R=a(324),T=a(171),D=a.n(T),H=a(97),M=a.n(H);O.a.defaults.baseURL="http://localhost:4000/api";function V(e){var t=Object(r.useContext)(m),a=t.user,n=t.setUser,c=Object(r.useState)(""),s=Object(i.a)(c,2),o=s[0],d=s[1],b=Object(r.useState)(""),f=Object(i.a)(b,2),x=f[0],g=f[1],v=Object(r.useState)(""),w=Object(i.a)(v,2),k=w[0],S=w[1],P=Object(r.useState)(!1),N=Object(i.a)(P,2),y=N[0],C=N[1],I=function(){var t=Object(u.a)(l.a.mark((function t(){var a,r,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=localStorage.getItem("token"),C(!0),!k){t.next=19;break}return(r=new M.a).append("description",k),x&&r.append("image",x),t.prev=6,t.next=9,O.a.post("/posts",r,{headers:{Authorization:"Bearer ".concat(a)}});case 9:n=t.sent,e.addPost(n.data),g(""),d(""),S(""),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),console.log(t.t0);case 19:C(!1);case 20:case"end":return t.stop()}}),t,null,[[6,16]])})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=localStorage.getItem("token");(function(){var t=Object(u.a)(l.a.mark((function t(){var r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=13;break}if(!e){t.next=13;break}return t.prev=2,t.next=5,O.a.get("/users/self",{headers:{Authorization:"Bearer ".concat(e)}});case 5:r=t.sent,c=r.data,n(c),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}})()()}),[a,n]),Object(h.jsx)("div",{className:"post",children:Object(h.jsxs)(U.a,{secondary:!0,children:[a&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{userId:a._id,username:a.username,userImg:"http://localhost:4000/api/users/"+a._id+"/profilePicture"}),Object(h.jsx)("br",{}),Object(h.jsx)(B.a,{className:"postText",value:k,placeholder:D()()+" "+a.username.split(" ")[0]+", What's on your mind...",onChange:function(e){S(e.target.value)}})]}),Object(h.jsx)("br",{}),Object(h.jsxs)(j.a,{className:"uploadButton",animated:!0,children:[Object(h.jsx)(j.a.Content,{hidden:!0,children:Object(h.jsx)("input",{value:o,type:"file",name:"uploadImage",id:"uploadImage",accept:"image/png, image/jpeg",onChange:function(e){d(e.target.value),g(e.target.files[0])}})}),Object(h.jsx)(j.a.Content,{visible:!0,children:Object(h.jsx)(z.a,{name:"photo"})})]}),Object(h.jsx)(j.a,{onClick:I,positive:!0,children:"POST"}),y&&Object(h.jsx)(R.a,{active:!0,children:"Posting.."})]})})}var q=a(327),W=a(98);a(224);function J(e){var t=e.postUser,a=e.post,n=Object(r.useContext)(m).user,c=Object(r.useState)(a.likes.length),s=Object(i.a)(c,2),o=s[0],d=s[1],p=Object(r.useState)(!1),f=Object(i.a)(p,2),x=f[0],g=f[1],v=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),d((function(e){return x?e-1:e+1})),g((function(e){return!e})),e.prev=3,e.next=6,O.a.patch("/posts/".concat(a._id,"/like"),{},{headers:{Authorization:"Bearer ".concat(t)}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=0;n&&(e=a.likes.includes(n._id)),g(e)}),[n,a]),Object(h.jsxs)(U.a,{color:"teal",children:[Object(h.jsx)("span",{className:"feedInfo",children:Object(h.jsxs)(q.a.Event,{children:[Object(h.jsx)(b.a,{size:"mini",src:t.profilePicture,avatar:!0}),Object(h.jsx)("span",{style:{marginLeft:"9px",fontSize:"20px",fontWeight:"bold",verticalAlign:"middle"},children:Object(h.jsx)("a",{href:"profile/?id=".concat(t.id),children:t.username})}),Object(h.jsx)("span",{children:a.createdAt})]})}),Object(h.jsxs)(q.a.Content,{children:[Object(h.jsx)(q.a.Extra,{className:"description",text:!0,children:a.description}),Object(h.jsx)(q.a.Extra,{images:!0,children:Object(h.jsx)("img",{className:"postImage",alt:"",src:a.image})}),Object(h.jsx)("div",{className:"like",children:Object(h.jsxs)(j.a,{as:"div",labelPosition:"right",children:[Object(h.jsx)(j.a,{color:x?"teal":"grey",onClick:v,icon:!0,children:x?Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)(z.a,{name:"thumbs up"})," Liked"]}):Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)(z.a,{name:"thumbs up outline"})," Like"]})}),Object(h.jsxs)(W.a,{basic:!0,children:[o," Likes"]})]})})]})]})}O.a.defaults.baseURL="http://localhost:4000/api";var Q=a(118),Y=a.n(Q);function G(e){var t=Object(r.useState)([]),a=Object(i.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!0),o=Object(i.a)(s,2),j=o[0],d=o[1],b=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=localStorage.getItem("token"),e.next=3,O.a.get("/users/".concat(t.userId),{headers:{Authorization:"Bearer ".concat(a)}});case 3:r=e.sent,n=r.data,s=Object(g.a)(Object(g.a)({},t),{},{user:n}),c((function(e){return[s].concat(Object(_.a)(e))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){Object(u.a)(l.a.mark((function e(){var t,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,O.a.get("/users/feed",{headers:{Authorization:"Bearer ".concat(t)}});case 3:a=e.sent,r=(r=a.data).map(function(){var e=Object(u.a)(l.a.mark((function e(a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/users/".concat(a.userId),{headers:{Authorization:"Bearer ".concat(t)}});case 2:return r=e.sent,n=r.data,e.abrupt("return",Object(g.a)(Object(g.a)({},a),{},{user:n}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Promise.all(r).then((function(e){c(e),d(!1)}));case 7:case"end":return e.stop()}}),e)})))()}),[]),Object(h.jsxs)("div",{className:"feed",children:[Object(h.jsx)(V,{addPost:b}),j?Object(h.jsx)(R.a,{active:!0,children:"Loading Posts"}):n.length>0?n.map((function(e){return Object(h.jsx)(J,{postUser:{id:e.user._id,username:e.user.username,profilePicture:"http://localhost:4000/api/users/"+e.userId+"/profilePicture"},post:Object(g.a)(Object(g.a)({},e),{},{likes:e.likes,image:"http://localhost:4000/api/posts/"+e._id+"/image",createdAt:Y()(new Date(e.createdAt))})},e._id)})):Object(h.jsx)("h5",{children:"No Posts to Show. Follow people to see Posts"})]})}a(225);O.a.defaults.baseURL="http://localhost:4000/api";var K=localStorage.getItem("token");function X(){try{return document.createEvent("TouchEvent"),!1}catch(e){return!0}}function Z(){var e=Object(r.useContext)(m),t=e.user,a=e.setUser,n=Object(x.f)();return Object(r.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=17;break}if(!K){e.next=16;break}return e.prev=2,e.next=5,O.a.get("/users/self",{headers:{Authorization:"Bearer ".concat(K)}});case 5:r=e.sent,c=r.data,a(c),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),localStorage.removeItem("token"),n.push("/login");case 14:e.next=17;break;case 16:n.push("/login");case 17:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}})()()}),[n,a,t]),Object(h.jsxs)("div",{children:[t&&Object(h.jsx)(I,{userImg:"http://localhost:4000/api/users/"+t._id+"/profilePicture"}),Object(h.jsxs)("div",{className:"mainBody",children:[X&&t&&Object(h.jsx)(F,{user:t}),Object(h.jsx)(G,{}),X&&Object(h.jsx)(E,{})]})]})}var $=a(80),ee=(a(226),a(325)),te=localStorage.getItem("token");function ae(e){var t=Object(x.f)(),a=Object(r.useState)(!0),n=Object(i.a)(a,2),c=n[0],s=n[1],o=Object(r.useState)(!0),b=Object(i.a)(o,2),p=b[0],f=b[1],v=Object(r.useState)(!0),w=Object(i.a)(v,2),k=w[0],S=w[1],P=Object(r.useState)(!1),N=Object(i.a)(P,2),y=N[0],C=N[1],I=Object(r.useContext)(m).setUser,E=Object(r.useState)({email:"",password:""}),A=Object(i.a)(E,2),L=A[0],F=A[1];Object(r.useEffect)((function(){return te&&O.a.get("/users/self",{headers:{Authorization:"Bearer ".concat(te)}}).then((function(e){t.push("/")})),function(){}}),[t]);var _=function(e){F((function(t){return Object(g.a)(Object(g.a)({},t),{},Object($.a)({},e.target.name,e.target.value))})),s(L.email.length>0),f(L.password.length>0)},B=function(){var e=Object(u.a)(l.a.mark((function e(a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),S(!0),C(!0),e.prev=3,e.next=6,O.a.post("/auth/login",L);case 6:r=e.sent,n=r.data,localStorage.setItem("token",n.token),I(n.user),t.push("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),S(!1);case 16:C(!1);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"loginContainer",children:Object(h.jsx)("div",{className:"loginForm",children:Object(h.jsxs)(U.a,{children:[Object(h.jsxs)("div",{className:"logo",children:[Object(h.jsxs)("h1",{children:[Object(h.jsx)("img",{alt:"V",src:d,height:"33",width:"33"}),"Social"]}),Object(h.jsx)("h2",{children:"Login"})]}),Object(h.jsxs)(ee.a,{onSubmit:B,children:[Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Email"}),Object(h.jsx)("input",{name:"email",placeholder:"Email",value:L.email,onChange:_}),!c&&Object(h.jsx)(W.a,{color:"red",pointing:!0,children:"Please enter an Email!"})]}),Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{name:"password",type:"password",placeholder:"Password",value:L.password,onChange:_}),!p&&Object(h.jsx)(W.a,{color:"red",pointing:!0,children:"Please enter a Password!"}),!k&&Object(h.jsx)(W.a,{color:"red",pointing:!0,basic:!0,children:"Incorrect Email or Password!"})]}),Object(h.jsx)("a",{href:"signup",children:"Don't have an account? Signup"}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(j.a,{positive:!0,type:"submit",children:"Login"})]}),y&&Object(h.jsx)(R.a,{active:!0,inline:"centered",children:"Logging In..."})]})})})}O.a.defaults.baseURL="http://localhost:4000/api";a(227);var re=a(172),ne=a.n(re);function ce(){var e=Object(x.f)(),t=Object(r.useState)(!1),a=Object(i.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)({validUserName:!0,validEmail:!0,passwordLength:!0,passwordMatch:!0}),o=Object(i.a)(s,2),b=o[0],p=o[1],f=Object(r.useState)(!0),m=Object(i.a)(f,2),v=m[0],w=m[1],k=Object(r.useState)({fullName:"",email:"",password:"",confirmPassword:""}),S=Object(i.a)(k,2),P=S[0],N=S[1],y=function(e){N(Object(g.a)(Object(g.a)({},P),{},Object($.a)({},e.target.name,e.target.value)))},C=function(){var t=Object(u.a)(l.a.mark((function t(){var a,r,n,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c(!0),w(!0),a=P.fullName.length,r=ne.a.isEmail(P.email),n=P.password===P.confirmPassword,s=P.password.length>7,p({validUserName:a,validEmail:r,passwordLength:s,passwordMatch:n}),!(a&&r&&s&&n)){t.next=20;break}return console.log(P),t.prev=9,t.next=12,O.a.post("/auth/register",{username:P.fullName,email:P.email,password:P.password});case 12:e.push("/login"),alert("Account Created! Please Log In."),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(9),w(!1);case 19:c(!1);case 20:c(!1);case 21:case"end":return t.stop()}}),t,null,[[9,16]])})));return function(){return t.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"signupContainer",children:Object(h.jsx)("div",{className:"signupForm",children:Object(h.jsxs)(U.a,{children:[Object(h.jsxs)("div",{className:"logo",children:[Object(h.jsxs)("h1",{children:[" ",Object(h.jsx)("img",{alt:"V",src:d,height:"33",width:"33"}),"Social"]}),Object(h.jsx)("h2",{children:"Signup"})]}),Object(h.jsxs)(ee.a,{onSubmit:C,children:[Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Full Name"}),Object(h.jsx)("input",{name:"fullName",value:P.fullName,onChange:y,placeholder:"Full Name"}),b.validUserName?null:Object(h.jsx)(W.a,{color:"red",pointing:!0,children:"Please enter a Name!"})]}),Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Email"}),Object(h.jsx)("input",{name:"email",value:P.email,onChange:y,placeholder:"Email"}),b.validEmail?null:Object(h.jsx)(W.a,{color:"red",pointing:!0,children:"Please enter a valid email!"}),v?null:Object(h.jsx)(W.a,{color:"red",pointing:!0,children:"Email address is already taken!"})]}),Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{name:"password",value:P.password,onChange:y,type:"password",placeholder:"Password"}),b.passwordLength?null:Object(h.jsx)(W.a,{color:"red",pointing:!0,children:"Password must be 8 characters long!"})]}),Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Confirm Password"}),Object(h.jsx)("input",{name:"confirmPassword",value:P.confirmPassword,onChange:y,type:"password",placeholder:"Confirm Password"}),b.passwordMatch?null:Object(h.jsx)(W.a,{color:"red",pointing:!0,children:"Passwords do not match!"})]}),Object(h.jsx)("a",{href:"login",children:"Already have an account? LogIn"}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),Object(h.jsx)(j.a,{positive:!0,type:"submit",children:"Signup"}),n&&Object(h.jsx)(R.a,{active:!0,inline:"centered",children:"Signing Up..."})]})]})})})}O.a.defaults.baseURL="http://localhost:4000/api";a(306);function se(e){var t=e.userId,a="http://localhost:4000/api/users/"+t+"/profilePicture",n="http://localhost:4000/api/users/"+t+"/coverPicture";return Object(r.useEffect)((function(){}),[]),Object(h.jsxs)("div",{className:"picturesContainer",children:[Object(h.jsx)("img",{className:"profile",alt:"",src:a}),Object(h.jsx)("img",{className:"cover",alt:"",src:n})]})}a(307);function ie(e){var t=Object(r.useState)(!1),a=Object(i.a)(t,2),n=a[0],c=a[1],s=Object(r.useContext)(m),o=s.user,d=s.setUser,b=Object(r.useState)({username:"",description:"",profilePictureName:"",coverPictureName:"",profilePicture:"",coverPicture:""}),p=Object(i.a)(b,2),f=p[0],x=p[1],v=function(){var t=Object(u.a)(l.a.mark((function t(){var a,r,n,s,i,o,u,j,b,h,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!0),a=localStorage.getItem("token"),r=f.username,n=f.description,s=f.profilePicture,i=f.coverPicture,t.prev=3,o={},t.next=7,O.a.patch("/users/self",{username:r,description:n},{headers:{Authorization:"Bearer ".concat(a)}});case 7:if(u=t.sent,o=u.data,!s){t.next=16;break}return(j=new M.a).append("image",s),t.next=14,O.a.post("/users/profilePicture",j,{headers:{Authorization:"Bearer ".concat(a)}});case 14:b=t.sent,o=b.data;case 16:if(!i){t.next=23;break}return(h=new M.a).append("image",i),t.next=21,O.a.post("/users/coverPicture",h,{headers:{Authorization:"Bearer ".concat(a)}});case 21:p=t.sent,o=p.data;case 23:c(!1),d(o),e.hide(),window.location.reload(),t.next=32;break;case 29:t.prev=29,t.t0=t.catch(3),alert(t.t0.message);case 32:case"end":return t.stop()}}),t,null,[[3,29]])})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){o&&x({username:o.username,description:o.description,profilePictureName:"",coverPictureName:"",profilePicture:"",coverPicture:""})}),[o]),Object(h.jsx)("div",{className:"editProfile",children:Object(h.jsxs)(U.a,{children:[Object(h.jsxs)(ee.a,{onSubmit:v,children:[Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Full Name"}),Object(h.jsx)("input",{required:!0,name:"username",placeholder:"Full Name",value:f.username,onChange:function(e){x((function(t){return Object(g.a)(Object(g.a)({},t),{},{username:e.target.value})}))}})]}),Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Description"}),Object(h.jsx)("input",{required:!0,name:"description",placeholder:"Bio",value:f.description,onChange:function(e){x((function(t){return Object(g.a)(Object(g.a)({},t),{},{description:e.target.value})}))}})]}),Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Change Profile Picture"}),Object(h.jsx)("input",{value:f.profilePictureName,type:"file",name:"uploadProfile",id:"uploadProfile",accept:"image/png, image/jpeg",onChange:function(e){x((function(t){return Object(g.a)(Object(g.a)({},t),{},{profilePictureName:e.target.value})})),x((function(t){return Object(g.a)(Object(g.a)({},t),{},{profilePicture:e.target.files[0]})}))}})]}),Object(h.jsxs)(ee.a.Field,{children:[Object(h.jsx)("label",{children:"Change Cover Picture"}),Object(h.jsx)("input",{value:f.coverPictureName,type:"file",name:"uploadCover",id:"uploadCover",accept:"image/png, image/jpeg",onChange:function(e){x((function(t){return Object(g.a)(Object(g.a)({},t),{},{coverPictureName:e.target.value})})),x((function(t){return Object(g.a)(Object(g.a)({},t),{},{coverPicture:e.target.files[0]})}))}})]}),Object(h.jsx)(j.a,{color:"facebook",type:"submit",children:"Save Changes"}),Object(h.jsx)(j.a,{onClick:function(){e.hide()},children:"Cancel"})]}),n&&Object(h.jsx)(R.a,{style:{marginLeft:"38%",marginTop:"2%"},inline:!0,active:!0,children:"Saving Changes.."})]})})}O.a.defaults.baseURL="http://localhost:4000/api";var oe=a(329),le=a(328),ue="http://localhost:4000/api/users";function je(){var e=Object(r.useContext)(m),t=e.user,a=e.setUser,n=Object(x.f)(),c=Object(r.useState)([]),s=Object(i.a)(c,2),o=s[0],d=s[1],b=Object(r.useState)(null),p=Object(i.a)(b,2),f=p[0],v=p[1],w=Object(r.useState)(!1),k=Object(i.a)(w,2),S=k[0],P=k[1],N=Object(r.useState)(!1),y=Object(i.a)(N,2),C=y[0],E=y[1],A=Object(r.useState)(!1),L=Object(i.a)(A,2),F=L[0],_=L[1],U=function(){var e=Object(u.a)(l.a.mark((function e(t,a){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/posts/all/".concat(t),{headers:{Authorization:"Bearer ".concat(a)}});case 3:r=e.sent,n=r.data.reverse(),d(n),P(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),P(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(r){var c,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=localStorage.getItem("token"),t){e.next=20;break}if(!c){e.next=19;break}return e.prev=3,e.next=6,O.a.get("/users/self",{headers:{Authorization:"Bearer ".concat(c)}});case 6:s=e.sent,i=s.data,a(i),E(!!i.following.find((function(e){return e===r}))),U(r,c),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),localStorage.removeItem("token"),n.push("/login");case 17:e.next=20;break;case 19:n.push("/login");case 20:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}();P(!0),function(){var t=Object(u.a)(l.a.mark((function t(){var a,r,n,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),r=new URLSearchParams(window.location.search),n=Object.fromEntries(r.entries()).id,t.prev=3,t.next=6,O.a.get("/users/".concat(n),{headers:{Authorization:"Bearer ".concat(a)}});case 6:c=t.sent,e(n),v(c.data),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),e(n),v("None");case 15:P(!1);case 16:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(){return t.apply(this,arguments)}}()()}),[n,a,t]),"None"===f?Object(h.jsxs)("div",{children:[t&&Object(h.jsx)(I,{userImg:ue+"/"+t._id+"/profilePicture"}),Object(h.jsx)("h2",{children:"Error 404! Profile Not Found."})]}):Object(h.jsxs)("div",{className:"timelineBody",children:[t&&Object(h.jsx)(I,{userImg:ue+"/"+t._id+"/profilePicture"}),Object(h.jsx)(se,{userId:f&&f._id}),Object(h.jsxs)("div",{className:"profileBody",children:[Object(h.jsx)("h2",{children:f&&f.username}),Object(h.jsx)("p",{children:f&&f.description}),Object(h.jsx)("div",{className:"stats",children:Object(h.jsxs)(oe.a.Group,{size:"tiny",color:"teal",children:[Object(h.jsxs)(oe.a,{children:[Object(h.jsx)(oe.a.Value,{children:f&&f.followers.length}),Object(h.jsx)(oe.a.Label,{children:"Followers"})]}),Object(h.jsxs)(oe.a,{children:[Object(h.jsx)(oe.a.Value,{children:f&&f.following.length}),Object(h.jsx)(oe.a.Label,{children:"Following"})]})]})}),(f&&f._id)!==(t&&t._id)?Object(h.jsx)(j.a,{className:"followButton",color:C?"grey":"twitter",onClick:function(){var e=localStorage.getItem("token"),t=C?"unfollow":"follow";O.a.patch("/users/".concat(f._id,"/").concat(t),{},{headers:{Authorization:"Bearer ".concat(e)}}),E((function(e){return!e}))},children:C?"Unfollow":"Follow"}):Object(h.jsxs)(h.Fragment,{children:[!F&&Object(h.jsx)(j.a,{className:"followButton",onClick:function(){_(!0)},children:"Edit Profile"}),F&&Object(h.jsx)(ie,{hide:function(){_(!1)}})]}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{}),S?Object(h.jsx)(le.a,{active:!0,children:Object(h.jsx)(R.a,{active:!0,children:"Loading Posts"})}):o.length>0?f&&o&&o.map((function(e){return Object(h.jsx)(J,{postUser:{username:f.username,profilePicture:"http://localhost:4000/api/users/"+f._id+"/profilePicture"},post:Object(g.a)(Object(g.a)({},e),{},{likes:e.likes,image:"http://localhost:4000/api/posts/"+e._id+"/image",createdAt:Y()(new Date(e.createdAt))})},e._id)})):Object(h.jsx)("h5",{children:"User hasn't posted yet."})]})]})}O.a.defaults.baseURL="http://localhost:4000/api";var de=a(49);var be=function(){var e=Object(r.useState)(Object(r.useContext)(m)),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(r.useMemo)((function(){return{user:a,setUser:n}}),[a,n]);return Object(h.jsx)(de.a,{children:Object(h.jsx)(m.Provider,{value:c,children:Object(h.jsxs)(x.c,{children:[Object(h.jsx)(x.a,{exact:!0,path:"/",children:Object(h.jsx)(Z,{})}),Object(h.jsx)(x.a,{path:"/login",children:Object(h.jsx)(ae,{})}),Object(h.jsx)(x.a,{path:"/signup",children:Object(h.jsx)(ce,{})}),Object(h.jsx)(x.a,{path:"/profile",children:Object(h.jsx)(je,{})})]})})})};a(308);s.a.render(Object(h.jsx)(be,{}),document.getElementById("root"))}},[[309,1,2]]]);
//# sourceMappingURL=main.903633b5.chunk.js.map